import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.io.FileWriter;
import java.io.IOException;


public class FileEncryption{
    public static String encryptFile(String dataToEncrypt){
        if(dataToEncrypt!= null){
            try{
                // Key Generator and choose the encryption standard AES
                KeyGenerator generator = KeyGenerator.getInstance("AES");
                // Generate a key 
                SecretKey aesKey = generator.generateKey();
                // Cipher object
                Cipher aesCipher;
                aesCipher = Cipher.getInstance("AES");

                // Turn the file we recieve into bytes and store in an array
                byte [] content = dataToEncrypt.getBytes("UTF8");
                // initialize the encryption with the key
                aesCipher.init(Cipher.ENCRYPT_MODE,aesKey);
                // Store the new text into another byte array
                byte[] textEncrypted = aesCipher.doFinal(content);

                // Turn the byte arraay into a string to be returned
                String s = new String(textEncrypted);
                return s;
            // Catch any exceptions
            }catch(Exception e){
                System.out.println("Error has occured!");
            }
        } return null;
    }
    public static void main(String[] args){

        // Replace this with your folder and or file to encrypt
        String pathToEncrypt = "C:\\Something";

        File dir = new File(pathToEncrypt);
        // Create array of Files that represents the files in the folder
        File[] directory = dir.listFiles();
        // If the directory or file is not null continue  
        if(directory != null){
            for(int i = 0;i<directory.length;i++){
                // If the item in the array is a file continue
                if(directory[i].isFile()){
                    // Catch any exceptions
                    try{
                        // Create new File object with the files absolute path 
                        File currentFile = new File(directory[i].getAbsolutePath());
                        // New scanner object to read the currentFile 
                        Scanner read = new Scanner(currentFile);
                        // Read file data and append to this variable
                        String fileData = "";
                        while(read.hasNextLine()){
                            fileData += read.nextLine();
                        }

                        // Catch any exceptions
                        try{
                            // New File writer object with file name the same as the current file 
                            FileWriter writeToFile = new FileWriter(directory[i].getName());
                            // Rewrite the encrypted file to the file
                            writeToFile.write(encryptFile(fileData));
                            // Close the FileWriter
                            writeToFile.close();
                            
                        // Catch any errors and print the stacktrace in case of any errors
                        }catch(IOException e){
                            System.out.println("An Error has occured");
                            e.printStackTrace();
                        }
                    
                      

                    // Catch any errors and print the stacktrace in case of any erros
                    }catch(FileNotFoundException e){
                        System.out.println("That file does not exist");
                        e.printStackTrace();
                    }

                }
            }
        }else System.out.println("Directory is empty");
        System.out.println("Done");
        
       

    
    }

    
}
